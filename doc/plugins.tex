\section{List of Filters and associated plug-ins}
\label{ch:plugins}


This chapter lists all the plugins available in mia. 
The descriptions follow the following pattern: 

\begin{description}
\item [Plugin:]\emph{the name by which the plugin is selected on the command
line}
\item [Description:] A description of the filter
\item [Parameters:] a list of the plugin parameters

\plugtabstart
parameter name& parameter type& description of the parameter & default value\\\hline
\end{tabular}
\end{description}

\subsection{2D image filters}
\label{sec:2dfilters}

In this section the following notation is used: $g$ indicates the source image,  
   $\hat{f}$ is the output image, and $S_{xy}$ is the set of pixels that is covered by the filter mask.
For an in-depth discussion of most of the filters presented here, see, e.g., \citet{gonzales02:dip}.


\subsubsection*{Convesion of pixel types}
\begin{description}
\item [Plugin:]convert
\item [Description:] Pixel conversion filter
\item [Conversions:] Mapping methods 
\begin{description}
\item [copy:] pixel values are copied, values outside of the target range are clipped
\item [linear:] pixel values are transformed according to $x \rightarrow a \times x + b$ , 
                 values outside of the target range are clipped
\item [opt:] The range of the input pixels \emph{found in the input image} 
		is mapped to the range of the output type. 
\item [range:] The range of the input pixel \emph{type} is mapped to the range of the output type. 
\end{description}
\item [Parameters:] a, b, map, repn

\plugtabstart
a&  float&  scaling for linear mapping & 1.0\\\hline
b&  float&  shift of linear mapping    & 0.0\\\hline
map& string & type of mapping (copy|linear|opt|range) & opt\\\hline
repn & string & target pixel type ( sbyte | ubyte | sshort | ushort |
				sint | uint | slong | ulong | float | double) & ubyte \\\hline
\end{tabular}
\end{description}

\subsubsection*{Downscale Filter}

\begin{description}
\item [Plugin:] downscale
\item [Description:] An filter that uses a seperable kernel to filter a 2D image. 
	For available kernels see Section \ref{sec:spacialkern}
\item [Parameters:] bx, by, kernel

\plugtabstart 
bx & int &  blocksize in x direction  $\in [1,2147483647]$ & 1 \\\hline
by & int &  blocksize in y direction  $\in [1,2147483647]$ & 1 \\\hline
kernel & string &   smoothing filter kernel type to be applied  & gauss \\\hline
\end{tabular}
\end{description}



\subsubsection*{Intensity based bandpass filter}
\begin{description}
\item [Plugin:]bandpass
\item [Description:]An intensity band pass filter - all pixels with intensities
outside the given range are set to zero, all other pixels remain the
same ($x:=x\in [min,max]\:?\: x\::\:0$
\item [Parameters:] min, max

\plugtabstart
min&  float&  lower bound of the bandpass range &0\\\hline
max&  float&  upper bound of the bandpass range &3.40282e+38\\\hline
\end{tabular}
\end{description}

\subsubsection*{Mean Least Variance}
\begin{description}
\item [Plugin:]\emph{mlv}
\item [Description:] an edge preserving and enhancing filter \cite{schulze94morphologybased}
\item [Parameters:] w

\plugtabstart
w & integer & filter width parameter &1\\\hline
\end{tabular}
\end{description}


\subsubsection*{Median Filter}
\begin{description}
\item [Plugin:]\emph{median}
\item [Description:] the median filter, brute force inpmementation 
\item [Parameters:] w

\plugtabstart
w & integer & filter width parameter & 1\\
\hline
\end{tabular}
\end{description}


\subsubsection*{Seperable Convolution Filter}

\begin{description}
\item [Plugin:] sepconv
\item [Description:] An filter that uses a seperable kernel to filter a 2D image. 
	For available kernels see Section \ref{sec:spacialkern}
\item [Parameters:] kx, ky

\plugtabstart
kx&  string &  filter kernel applied in the x-direction & gauss:w=1 \\\hline
ky&  string &  filter kernel applied in the y-direction & gauss:w=1 \\\hline
\end{tabular}
\end{description}

%
%
%

\subsection{3D Filter}
\label{sec:3dfilters}

\subsubsection*{Binarize Filter}
\begin{description}
\item [Plugin:]binarize
\item [Description:]An binarize filter - all pixels with intensities
outside the given range are set to zero, all other pixels are set to one
same ($x:=x\in [min,max]\:?\: x\::\:0$
\item [Parameters:] min, max

\plugtabstart
min&  float&  lower bound of the intensity range &0\\\hline
max&  float&  upper bound of the intensity range &3.40282e+38\\\hline
\end{tabular}
\end{description}


\subsubsection*{Bandpass Intensity Filter}
\begin{description}
\item [Plugin:]bandpass
\item [Description:]An intensity band pass filter - all pixels with intensities
outside the given range are set to zero, all other pixels remain the
same ($x:=x\in [min,max]\:?\: x\::\:0$
\item [Parameters:] min, max

\plugtabstart
min&  float&  lower bound of the bandpass range &0\\\hline
max&  float&  upper bound of the bandpass range &3.40282e+38\\\hline
\end{tabular}
\end{description}

\subsubsection*{Convesion of pixel types}
\begin{description}
\item [Plugin:]convert
\item [Description:] Pixel conversion filter
\item [Conversions:] Mapping methods 
\begin{description}
\item [copy:] pixel values are copied, values outside of the target range are clipped
\item [linear:] pixel values are transformed according to $x \rightarrow a \times x + b$ , 
                 values outside of the target range are clipped
\item [opt:] The range of the input pixels \emph{found in the input image} 
		is mapped to the range of the output type. 
\item [range:] The range of the input pixel \emph{type} is mapped to the range of the output type. 
\end{description}
\item [Parameters:] a, b, map, repn

\plugtabstart
a&  float&  scaling for linear mapping & 1.0\\\hline
b&  float&  shift of linear mapping    & 0.0\\\hline
map& string & type of mapping (copy|linear|opt|range) & opt\\\hline
repn & string & target pixel type ( sbyte | ubyte | sshort | ushort |
				sint | uint | slong | ulong | float | double) & ubyte \\\hline
\end{tabular}
\end{description}


\subsubsection*{Downscale Filter}

\begin{description}
\item [Plugin:] downscale
\item [Description:] An filter that uses a seperable kernel to filter a 3D image. 
	For available kernels see Section \ref{sec:spacialkern}
\item [Parameters:] bx, by, bz, kernel

\plugtabstart 
bx & int &  blocksize in x direction  $\in [1,2147483647]$ & 1 \\\hline
by & int &  blocksize in y direction  $\in [1,2147483647]$ & 1 \\\hline
bz & int &  blocksize in z direction  $\in [1,2147483647]$ & 1 \\\hline
kernel & string &   smoothing filter kernel type to be applied  & gauss \\\hline
\end{tabular}
\end{description}


\subsubsection*{Gaussian Smoothing}
\begin{description}
\item [Plugin:]gauss
\item [Description:] isotropic spacial gaussian smoothing filter 
\item [Parameters:] w

\plugtabstart
w&  int&  filter width parameter [0,2147483647] & 1\\\hline
\end{tabular}
\end{description}

\subsubsection*{Labeling}
\begin{description}
\item [Plugin:]label
\item [Description:] Labeling of connected components in binary images
\item [Remark:] Input image must be binary
\item [Parameters:] n

\plugtabstart
n&  string&  neighborhood mask (see Section \ref{sec:shapes3d}) & n6\\\hline
\end{tabular}
\end{description}


\subsubsection*{Morphological Erode, Dilate, Open, Close}
\begin{description}
\item [Plugin:]erode, dilate, open, close
\item [Description:] the respective morphological filters
\item [Parameters:] hint, shape

\plugtabstart
shape&  string &  structuring element (see Section \ref{sec:shapes3d}) & [sphere:r=1]\\\hline
hint & string & hint to dominant (binary) image content (black|white) & black \\\hline
\end{tabular}
\end{description}


\subsubsection*{Median Filter}
\begin{description}
\item [Plugin:]median
\item [Description:] isotropic median filter 
\item [Parameters:] w

\plugtabstart
w&  int&  filter width parameter $\in[0,2147483647]$ & 1\\\hline
\end{tabular}
\end{description}

\subsubsection*{Mean Least Variance}
\begin{description}
\item [Plugin:]mlv
\item [Description:] isotropic mean least variance filter 
\item [Parameters:] w

\plugtabstart
w&  int&  filter width parameter $\in [0,2147483647]$ & 1\\\hline
\end{tabular}
\end{description}

\subsubsection*{Separable Convolution Filter}

\begin{description}
\item [Plugin:] sepconv
\item [Description:] An filter that uses a seperable kernel to filter a 3D image. 
	For available kernels see Section \ref{sec:spacialkern}
\item [Parameters:] kx, ky, kz

\plugtabstart
kx&  string &  filter kernel applied in the x-direction & gauss:w=1 \\\hline
ky&  string &  filter kernel applied in the y-direction & gauss:w=1 \\\hline
kz&  string &  filter kernel applied in the z-direction & gauss:w=1 \\\hline
\end{tabular}
\end{description}


\subsection{3D Shapes}
\label{sec:shapes3d}

\subsubsection*{6n Neighborhood }

\begin{description}
\item [Plugin:] n6
\item [Description:] a shape object describing the 6n voxel neighbourhood.
\item [Parameters:] 
\end{description}

\subsubsection*{18n Neighborhood }

\begin{description}
\item [Plugin:] n18
\item [Description:] a shape object describing the 18n voxel neighbourhood.
\item [Parameters:] 
\end{description}

\subsubsection*{26n Neighborhood }

\begin{description}
\item [Plugin:] n26
\item [Description:] a shape object describing the 26n voxel neighbourhood.
\item [Parameters:] 
\end{description}

\subsubsection*{6n Neighborhood }

\begin{description}
\item [Plugin:] n6
\item [Description:] a shape object describing the 6n voxel neighbourhood.
\item [Parameters:] 
\end{description}

\subsubsection*{Sphere}

\begin{description}
\item [Plugin:] sphere
\item [Description:] a shape object describing filled sphere
\item [Parameters:] r
\end{description}
\plugtabstart
r&  float  & radius of the sphere & 2 \\\hline
\end{tabular}

\subsection{Spacial Filter Kernels}
\label{sec:spacialkern}

\subsubsection*{Gaussian Convolution Kernel}

\begin{description}
\item [Plugin:] gauss
\item [Description:] The kernel of a spacial Gaussien filter 
\item [Parameters:] w

\plugtabstart
w&  int  & half width of the kernel, actual width = $2 * w + 1$ & 1 \\\hline
\end{tabular}
\end{description}

\subsection{3D Image Combination}
\label{sec:3dcombiners}

\subsubsection*{Label X-reference map}

\begin{description}
\item [Plugin:] labelxmap
\item [Description:] Label cross referencing 
\item [Parameters:] \emph{none}
\end{description}


\subsection{Non-linear image registration}
\label{sec:nrreg}

The following plug-ins are available for both, 2D and 3D implementations of the non-rogid registration algorithms. 

\subsubsection{Cost functions}

\subsubsection*{Sum of Squared Differences}

\begin{description}
\item [Plugin:] ssd
\item [Description:] Sum of Squared Differenes: $F_\text{cost} := \int_\Omega S(x) - R(x) dx$. 
\item [Parameters:] (none)
\end{description}

\subsubsection{Registration models}

These plug-ins provide the solver for the inner loop of the registration, and correspond to the general mathematical model 
  of the registration.  

\subsubsection*{navier}

\begin{description}
\item [Plugin:] navier
\item [Description:] Image registration based on the reduced form of the Navier-Stokes-Equation. 
                       Proviedes linera elastic and fluid dynamic registration without volume preservation. 
\item [Parameters:] epsilon, iter, lambda, mu, omega
\end{description}
\plugtabstart 
epsilon & float &  blocksize in x direction  $\in [1e-6, 0.1]$ & 1e-04 \\\hline
iter & int &  blocksize in y direction  $\in [10, 10000]$ & 100 \\\hline
lambda & float &  isotropic compression $\in [0, \infty]$ & 1.0 \\\hline
mu & float &    isotropic compliance   $\in [0, \infty]$ & 1.0 \\\hline
omega & float &   relaxation parameter $\in [0.1, 10]$ & 1.0 \\\hline
\end{tabular}

\subsubsection*{naviera}

\begin{description}
\item [Plugin:] naviera
\item [Description:] Image registration based on the reduced form of the Navier-Stokes-Equation, adaptive, optimized solver. 
                      Proviedes linera elastic and fluid dynamic registration without volume preservation. 
\item [Parameters:] epsilon, iter, lambda, mu
\end{description}
\plugtabstart 
epsilon & float &  blocksize in x direction  $\in [1e-6, 0.1]$ & 1e-04 \\\hline
iter & int &  blocksize in y direction  $\in [10, 10000]$ & 100 \\\hline
lambda & float &  isotropic compression $\in [0, \infty]$ & 1.0 \\\hline
mu & float &    isotropic compliance   $\in [0, \infty]$ & 1.0 \\\hline
\end{tabular}

\subsubsection*{navierasse}
This plug-in is currently only available for 3D, and if the software was compiled with the GCC compiler or the Intel Compiler

\begin{description}
\item [Plugin:] navierasse
\item [Description:] Image registration based on the reduced form of the Navier-Stokes-Equation, adaptive, optimized solver. 
		      Supports SSE on the Intel platform and AltiVec on PowerPC. 
                      Proviedes linera elastic and fluid dynamic registration without volume preservation. 
\item [Parameters:] epsilon, iter, lambda, mu
\end{description}
\plugtabstart 
epsilon & float &  blocksize in x direction  $\in [1e-6, 0.1]$ & 1e-04 \\\hline
iter & int &  blocksize in y direction  $\in [10, 10000]$ & 100 \\\hline
lambda & float &  isotropic compression $\in [0, \infty]$ & 1.0 \\\hline
mu & float &    isotropic compliance   $\in [0, \infty]$ & 1.0 \\\hline
\end{tabular}

\subsubsection{Timestep models}

These plug-ins provide the time step evaluation in the outer iteration of the registration. 

	
\subsubsection*{Direct evaulation}

\begin{description}
\item [Plugin:] direct
\item [Description:] Provides a ``direct'' time stepping - in the Navier-based models this corrensponds to a linear elastic registration. 
\item [Parameters:] min,max
\end{description}

\plugtabstart 
min & float &  minimum time step $\in [0.001, \infty]$ & 0.1 \\\hline
max & float &  maximum time step $\in [0.002, \infty]$ & 2.0 \\\hline
\end{tabular}

\subsubsection*{Fluid Dynamics}

\begin{description}
\item [Plugin:] fluid
\item [Description:] Provides time stepping that corrensponds to a fluid dynamic model in the Navier-based registration model. 
\item [Parameters:] min,max
\end{description}

\plugtabstart 
min & float &  minimum time step $\in [0.001, \infty]$ & 0.1 \\\hline
max & float &  maximum time step $\in [0.002, \infty]$ & 2.0 \\\hline
\end{tabular}




